<!-- Controls/SpecialColumns/CheckBoxColumnHeader.xaml - ✅ NOVÝ: CheckBox Column Header -->
<UserControl x:Class="RpaWinUiComponentsPackage.AdvancedWinUiDataGrid.Controls.SpecialColumns.CheckBoxColumnHeader"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:RpaWinUiComponentsPackage.AdvancedWinUiDataGrid.Controls.SpecialColumns">

    <Grid x:Name="HeaderContainer" 
          Background="Transparent"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch"
          MinWidth="50"
          MinHeight="35">
        
        <!-- Main CheckBox pre Check All/Uncheck All -->
        <CheckBox x:Name="HeaderCheckBox"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  IsThreeState="True"
                  Checked="OnHeaderCheckBoxChecked"
                  Unchecked="OnHeaderCheckBoxUnchecked"
                  Indeterminate="OnHeaderCheckBoxIndeterminate"
                  Margin="8,4"
                  ToolTipService.ToolTip="Check/Uncheck all rows">
            
            <!-- Custom template pre tri-state checkbox -->
            <CheckBox.Template>
                <ControlTemplate TargetType="CheckBox">
                    <Grid Background="Transparent">
                        <Border x:Name="CheckBoxBorder"
                                Width="18"
                                Height="18"
                                BorderBrush="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                BorderThickness="2"
                                Background="{ThemeResource SystemControlBackgroundAltHighBrush}"
                                CornerRadius="2">
                            
                            <!-- Check mark -->
                            <FontIcon x:Name="CheckGlyph"
                                      FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                      Glyph="&#xE73E;"
                                      FontSize="12"
                                      Foreground="{ThemeResource SystemControlHighlightAltBaseHighBrush}"
                                      Visibility="Collapsed"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                            
                            <!-- Indeterminate mark -->
                            <Rectangle x:Name="IndeterminateGlyph"
                                       Width="10"
                                       Height="2"
                                       Fill="{ThemeResource SystemControlHighlightAltBaseHighBrush}"
                                       Visibility="Collapsed"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>
                        
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CheckStates">
                                <VisualState x:Name="Checked">
                                    <VisualState.Setters>
                                        <Setter Target="CheckGlyph.Visibility" Value="Visible"/>
                                        <Setter Target="CheckBoxBorder.Background" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                        <Setter Target="CheckBoxBorder.BorderBrush" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Unchecked">
                                    <VisualState.Setters>
                                        <Setter Target="CheckGlyph.Visibility" Value="Collapsed"/>
                                        <Setter Target="IndeterminateGlyph.Visibility" Value="Collapsed"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Indeterminate">
                                    <VisualState.Setters>
                                        <Setter Target="IndeterminateGlyph.Visibility" Value="Visible"/>
                                        <Setter Target="CheckBoxBorder.Background" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                        <Setter Target="CheckBoxBorder.BorderBrush" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="CheckBoxBorder.Background" Value="{ThemeResource SystemControlHighlightListLowBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Target="CheckBoxBorder.Background" Value="{ThemeResource SystemControlHighlightListMediumBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Grid>
                </ControlTemplate>
            </CheckBox.Template>
        </CheckBox>
        
        <!-- Tooltip s informáciami -->
        <ToolTipService.ToolTip>
            <ToolTip>
                <StackPanel Orientation="Vertical" Spacing="4">
                    <TextBlock Text="Row Selection" FontWeight="SemiBold"/>
                    <TextBlock Text="☑️ Checked: Check all rows"/>
                    <TextBlock Text="☐ Unchecked: Uncheck all rows"/>
                    <TextBlock Text="⬜ Mixed: Some rows selected"/>
                </StackPanel>
            </ToolTip>
        </ToolTipService.ToolTip>
        
    </Grid>
</UserControl>