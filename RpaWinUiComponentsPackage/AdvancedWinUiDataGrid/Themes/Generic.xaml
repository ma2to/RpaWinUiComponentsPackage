<!-- AdvancedWinUiDataGrid/Themes/Generic.xaml - ✅ KOMPLETNE OPRAVENÝ -->
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:RpaWinUiComponentsPackage.AdvancedWinUiDataGrid">

    <!-- ✅ CONVERTERS - Definované ako resources -->
    <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    <local:InvertedBoolToVisibilityConverter x:Key="InvertedBoolToVisibilityConverter" />
    <local:BoolToValidationBrushConverter x:Key="BoolToValidationBrushConverter" />
    <local:BoolToValidationThicknessConverter x:Key="BoolToValidationThicknessConverter" />
    <local:ZebraRowConverter x:Key="ZebraRowConverter" />
    <local:ZebraRowMultiConverter x:Key="ZebraRowMultiConverter" />
    <local:RowIndexToZebraConverter x:Key="RowIndexToZebraConverter" />

    <!-- ✅ ZÁKLADNÝ štýl pre AdvancedDataGrid (UserControl) -->
    <Style TargetType="local:AdvancedDataGrid">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="8" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="UseSystemFocusVisuals" Value="False" />
        <Setter Property="MinWidth" Value="300" />
        <Setter Property="MinHeight" Value="200" />
    </Style>

    <!-- ✅ Štýly pre DataGridCell -->
    <Style TargetType="local:DataGridCell">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,1,1" />
        <Setter Property="Padding" Value="8,6" />
        <Setter Property="MinHeight" Value="36" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="True" />
        <Setter Property="UseSystemFocusVisuals" Value="True" />
    </Style>

    <!-- ✅ Štýly pre SearchAndSortHeader -->
    <Style TargetType="local:SearchAndSortHeader">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorAltBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,1,1" />
        <Setter Property="MinHeight" Value="60" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
    </Style>

    <!-- ✅ Štýly pre DeleteRowColumn -->
    <Style TargetType="local:DeleteRowColumn">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,1,1" />
        <Setter Property="Width" Value="40" />
        <Setter Property="MinHeight" Value="36" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
    </Style>

    <!-- ✅ Štýly pre ValidationAlertsColumn s stretching support -->
    <Style TargetType="local:ValidationAlertsColumn">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,0,1" />
        <Setter Property="MinWidth" Value="200" />
        <Setter Property="MinHeight" Value="36" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
    </Style>

    <!-- ✅ Color theme resources pre runtime customization -->
    <SolidColorBrush x:Key="DataGridCellBackgroundBrush" Color="{ThemeResource LayerFillColorDefault}" />
    <SolidColorBrush x:Key="DataGridCellBorderBrush" Color="{ThemeResource CardStrokeColorDefault}" />
    <SolidColorBrush x:Key="DataGridCellTextBrush" Color="{ThemeResource TextFillColorPrimary}" />
    <SolidColorBrush x:Key="DataGridHeaderBackgroundBrush" Color="{ThemeResource LayerFillColorAlt}" />
    <SolidColorBrush x:Key="DataGridHeaderTextBrush" Color="{ThemeResource TextFillColorPrimary}" />
    <SolidColorBrush x:Key="DataGridValidationErrorBrush" Color="{ThemeResource SystemFillColorCritical}" />
    <SolidColorBrush x:Key="DataGridSelectionBrush" Color="{ThemeResource AccentFillColorDefault}" />
    <SolidColorBrush x:Key="DataGridHoverBrush" Color="{ThemeResource SubtleFillColorSecondary}" />

    <!-- ✅ NOVÉ: Zebra rows colors -->
    <SolidColorBrush x:Key="DataGridZebraRowBrush" Color="#14000000" />
    <SolidColorBrush x:Key="DataGridNormalRowBrush" Color="Transparent" />

    <!-- ✅ Validation error resources -->
    <Thickness x:Key="DataGridValidationErrorBorderThickness">2</Thickness>
    <Thickness x:Key="DataGridNormalBorderThickness">0,0,1,1</Thickness>

    <!-- ✅ NOVÉ: Resize cursor resources -->
    <x:String x:Key="ResizeCursorType">SizeWE</x:String>

    <!-- ✅ Animation resources pre smooth UX -->
    <Duration x:Key="DataGridAnimationDuration">0:0:0.2</Duration>

    <Storyboard x:Key="DataGridCellFocusAnimation">
        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         To="1.0"
                         Duration="{StaticResource DataGridAnimationDuration}" />
    </Storyboard>

    <Storyboard x:Key="DataGridCellHoverAnimation">
        <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                        To="#20000000"
                        Duration="{StaticResource DataGridAnimationDuration}" />
    </Storyboard>

    <!-- ✅ Template resources pre advanced customization -->
    <ControlTemplate x:Key="DataGridLoadingTemplate" TargetType="ContentControl">
        <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Spacing="16">
                <ProgressRing IsActive="True" 
                             Width="32" 
                             Height="32"/>
                <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"
                          FontSize="14"
                          FontWeight="Medium"
                          HorizontalAlignment="Center"
                          TextWrapping="Wrap"
                          MaxWidth="300"/>
            </StackPanel>
        </Border>
    </ControlTemplate>

    <!-- ✅ Error template -->
    <ControlTemplate x:Key="DataGridErrorTemplate" TargetType="ContentControl">
        <Border Background="{ThemeResource SystemFillColorCriticalBackgroundBrush}"
                BorderBrush="{ThemeResource SystemFillColorCriticalBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Spacing="12">
                <FontIcon Glyph="&#xE783;" 
                         FontSize="24"
                         Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"
                          FontSize="14"
                          FontWeight="Medium"
                          HorizontalAlignment="Center"
                          TextWrapping="Wrap"
                          MaxWidth="400"
                          Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
            </StackPanel>
        </Border>
    </ControlTemplate>

    <!-- ✅ Data templates pre cell types -->
    <DataTemplate x:Key="StandardCellTemplate">
        <Border Background="{Binding IsValid, Converter={StaticResource BoolToValidationBrushConverter}}"
                BorderBrush="{Binding IsValid, Converter={StaticResource BoolToValidationBrushConverter}}"
                BorderThickness="{Binding IsValid, Converter={StaticResource BoolToValidationThicknessConverter}}"
                MinHeight="36"
                HorizontalAlignment="Stretch">
            <TextBox Text="{Binding DisplayValue, Mode=TwoWay}" 
                     BorderThickness="0"
                     Background="Transparent"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     VerticalAlignment="Stretch"
                     HorizontalAlignment="Stretch"
                     Margin="4,2"
                     FontSize="14" />
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="ReadOnlyCellTemplate">
        <Border Background="Transparent"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,1,1"
                MinHeight="36"
                HorizontalAlignment="Stretch">
            <TextBlock Text="{Binding DisplayValue}" 
                       VerticalAlignment="Center"
                       HorizontalAlignment="Stretch"
                       TextWrapping="Wrap"
                       Margin="8,6"
                       FontSize="14" />
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="DeleteButtonCellTemplate">
        <Border Background="Transparent"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,1,1"
                Width="40"
                MinHeight="36"
                HorizontalAlignment="Center">
            <Button Background="Transparent"
                    BorderThickness="0"
                    Width="24"
                    Height="24"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    ToolTipService.ToolTip="Delete row">
                <FontIcon Glyph="&#xE74D;" 
                         FontSize="12"
                         Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
            </Button>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="ValidationAlertsCellTemplate">
        <Border Background="Transparent"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,0,1"
                MinWidth="200"
                MinHeight="36"
                HorizontalAlignment="Stretch">
            <ScrollViewer VerticalScrollBarVisibility="Auto" 
                          HorizontalScrollBarVisibility="Disabled"
                          MaxHeight="100"
                          HorizontalAlignment="Stretch">
                <TextBlock Text="{Binding ValidationErrors}"
                           TextWrapping="Wrap"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Stretch"
                           FontSize="12"
                           Margin="8,6"
                           Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
            </ScrollViewer>
        </Border>
    </DataTemplate>

    <!-- ✅ NOVÉ: Zebra row template -->
    <DataTemplate x:Key="ZebraRowCellTemplate">
        <Border Background="{Binding IsZebraRow, Converter={StaticResource ZebraRowConverter}}"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,1,1"
                MinHeight="36"
                HorizontalAlignment="Stretch">
            <TextBox Text="{Binding DisplayValue, Mode=TwoWay}" 
                     BorderThickness="0"
                     Background="Transparent"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     VerticalAlignment="Stretch"
                     HorizontalAlignment="Stretch"
                     Margin="4,2"
                     FontSize="14" />
        </Border>
    </DataTemplate>

    <!-- ✅ Header template -->
    <DataTemplate x:Key="DataGridHeaderTemplate">
        <Border Background="{StaticResource DataGridHeaderBackgroundBrush}"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,1,1"
                Padding="8,8"
                MinHeight="40"
                HorizontalAlignment="Stretch">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding}" 
                           VerticalAlignment="Center"
                           HorizontalAlignment="Left"
                           FontWeight="SemiBold"
                           FontSize="14"
                           TextTrimming="CharacterEllipsis"
                           Foreground="{StaticResource DataGridHeaderTextBrush}"/>

                <!-- Resize grip -->
                <Border Grid.Column="1"
                        Width="4"
                        Background="Transparent"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Stretch" />
            </Grid>
        </Border>
    </DataTemplate>

    <!-- ✅ NOVÉ: ValidAlerts stretching header template -->
    <DataTemplate x:Key="ValidAlertsHeaderTemplate">
        <Border Background="{StaticResource DataGridHeaderBackgroundBrush}"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,0,1"
                Padding="8,8"
                MinHeight="40"
                MinWidth="200"
                HorizontalAlignment="Stretch">
            <TextBlock Text="⚠️ Validation Alerts" 
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left"
                       FontWeight="SemiBold"
                       FontSize="14"
                       Foreground="Orange"/>
        </Border>
    </DataTemplate>

    <!-- ✅ NOVÉ: Resizable header template -->
    <DataTemplate x:Key="ResizableHeaderTemplate">
        <Border Background="{StaticResource DataGridHeaderBackgroundBrush}"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,1,1"
                Padding="8,8"
                MinHeight="40">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="4"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding}" 
                           VerticalAlignment="Center"
                           FontWeight="SemiBold"
                           FontSize="14"
                           TextTrimming="CharacterEllipsis"
                           Foreground="{StaticResource DataGridHeaderTextBrush}"/>

                <!-- Resize grip -->
                <Border Grid.Column="1"
                        Background="Transparent"
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Stretch" />
            </Grid>
        </Border>
    </DataTemplate>

    <!-- ✅ NOVÉ: Responsive styles pre rôzne veľkosti -->
    <Style x:Key="CompactDataGridStyle" TargetType="local:AdvancedDataGrid" BasedOn="{StaticResource {x:Type local:AdvancedDataGrid}}">
        <Setter Property="MinWidth" Value="250" />
        <Setter Property="MinHeight" Value="150" />
    </Style>

    <Style x:Key="ExpandedDataGridStyle" TargetType="local:AdvancedDataGrid" BasedOn="{StaticResource {x:Type local:AdvancedDataGrid}}">
        <Setter Property="MinWidth" Value="600" />
        <Setter Property="MinHeight" Value="400" />
    </Style>

</ResourceDictionary>