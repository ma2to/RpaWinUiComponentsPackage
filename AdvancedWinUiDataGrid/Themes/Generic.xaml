<!-- AdvancedWinUiDataGrid/Themes/Generic.xaml - ✅ OPRAVENÉ pre UserControl a Package Reference podporu -->
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:RpaWinUiComponents.AdvancedWinUiDataGrid">

    <!-- ✅ KĽÚČOVÁ OPRAVA: Základný štýl pre AdvancedDataGrid (UserControl) -->
    <Style TargetType="local:AdvancedDataGrid">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="8" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="UseSystemFocusVisuals" Value="False" />
    </Style>

    <!-- ✅ Štýly pre DataGridCell -->
    <Style TargetType="local:DataGridCell">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,1,1" />
        <Setter Property="Padding" Value="8,6" />
        <Setter Property="MinHeight" Value="36" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="True" />
        <Setter Property="UseSystemFocusVisuals" Value="True" />
    </Style>

    <!-- ✅ Štýly pre DeleteRowColumn -->
    <Style TargetType="local:DeleteRowColumn">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,1,1" />
        <Setter Property="Width" Value="40" />
        <Setter Property="MinHeight" Value="36" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
    </Style>

    <!-- ✅ Štýly pre ValidationAlertsColumn -->
    <Style TargetType="local:ValidationAlertsColumn">
        <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
        <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
        <Setter Property="BorderThickness" Value="0,0,0,1" />
        <Setter Property="MinWidth" Value="200" />
        <Setter Property="MinHeight" Value="36" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
    </Style>

    <!-- ✅ NOVÉ: Color theme resources pre runtime customization -->
    <SolidColorBrush x:Key="DataGridCellBackgroundBrush" Color="{ThemeResource LayerFillColorDefault}" />
    <SolidColorBrush x:Key="DataGridCellBorderBrush" Color="{ThemeResource CardStrokeColorDefault}" />
    <SolidColorBrush x:Key="DataGridCellTextBrush" Color="{ThemeResource TextFillColorPrimary}" />
    <SolidColorBrush x:Key="DataGridHeaderBackgroundBrush" Color="{ThemeResource LayerFillColorAlt}" />
    <SolidColorBrush x:Key="DataGridHeaderTextBrush" Color="{ThemeResource TextFillColorPrimary}" />
    <SolidColorBrush x:Key="DataGridValidationErrorBrush" Color="{ThemeResource SystemFillColorCritical}" />
    <SolidColorBrush x:Key="DataGridSelectionBrush" Color="{ThemeResource AccentFillColorDefault}" />
    <SolidColorBrush x:Key="DataGridHoverBrush" Color="{ThemeResource SubtleFillColorSecondary}" />

    <!-- ✅ NOVÉ: Validation error resources -->
    <Thickness x:Key="DataGridValidationErrorBorderThickness">2</Thickness>
    <Thickness x:Key="DataGridNormalBorderThickness">0,0,1,1</Thickness>

    <!-- ✅ NOVÉ: Animation resources pre smooth UX -->
    <Duration x:Key="DataGridAnimationDuration">0:0:0.2</Duration>

    <Storyboard x:Key="DataGridCellFocusAnimation">
        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         To="1.0"
                         Duration="{StaticResource DataGridAnimationDuration}" />
    </Storyboard>

    <!-- ✅ NOVÉ: Template resources pre advanced customization -->
    <ControlTemplate x:Key="DataGridLoadingTemplate" TargetType="ContentControl">
        <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Spacing="16">
                <ProgressRing IsActive="True" 
                             Width="32" 
                             Height="32"/>
                <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"
                          FontSize="14"
                          FontWeight="Medium"
                          HorizontalAlignment="Center"
                          TextWrapping="Wrap"
                          MaxWidth="300"/>
            </StackPanel>
        </Border>
    </ControlTemplate>

    <!-- ✅ NOVÉ: Error template -->
    <ControlTemplate x:Key="DataGridErrorTemplate" TargetType="ContentControl">
        <Border Background="{ThemeResource SystemFillColorCriticalBackgroundBrush}"
                BorderBrush="{ThemeResource SystemFillColorCriticalBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Spacing="12">
                <FontIcon Glyph="&#xE783;" 
                         FontSize="24"
                         Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"
                          FontSize="14"
                          FontWeight="Medium"
                          HorizontalAlignment="Center"
                          TextWrapping="Wrap"
                          MaxWidth="400"
                          Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
            </StackPanel>
        </Border>
    </ControlTemplate>

    <!-- ✅ NOVÉ: Custom converters ako resources -->
    <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    <local:InvertedBoolToVisibilityConverter x:Key="InvertedBoolToVisibilityConverter" />
    <local:BoolToValidationBrushConverter x:Key="BoolToValidationBrushConverter" />
    <local:BoolToValidationThicknessConverter x:Key="BoolToValidationThicknessConverter" />

    <!-- ✅ NOVÉ: Data templates pre cell types -->
    <DataTemplate x:Key="StandardCellTemplate">
        <TextBlock Text="{Binding}" 
                   VerticalAlignment="Center"
                   TextWrapping="Wrap"
                   Margin="4"/>
    </DataTemplate>

    <DataTemplate x:Key="EditableCellTemplate">
        <TextBox Text="{Binding Mode=TwoWay}" 
                 BorderThickness="0"
                 Background="Transparent"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 VerticalAlignment="Stretch"/>
    </DataTemplate>

    <DataTemplate x:Key="DeleteButtonCellTemplate">
        <Button Background="Transparent"
                BorderThickness="0"
                Width="24"
                Height="24"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <FontIcon Glyph="&#xE74D;" 
                     FontSize="12"
                     Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
        </Button>
    </DataTemplate>

    <DataTemplate x:Key="ValidationAlertsCellTemplate">
        <ScrollViewer VerticalScrollBarVisibility="Auto" 
                      HorizontalScrollBarVisibility="Disabled"
                      MaxHeight="100">
            <TextBlock Text="{Binding}"
                       TextWrapping="Wrap"
                       VerticalAlignment="Center"
                       FontSize="12"
                       Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
        </ScrollViewer>
    </DataTemplate>

    <!-- ✅ NOVÉ: Header template -->
    <DataTemplate x:Key="DataGridHeaderTemplate">
        <Border Background="{StaticResource DataGridHeaderBackgroundBrush}"
                BorderBrush="{StaticResource DataGridCellBorderBrush}"
                BorderThickness="0,0,1,1"
                Padding="8,8"
                MinHeight="40">
            <TextBlock Text="{Binding}" 
                       VerticalAlignment="Center"
                       FontWeight="SemiBold"
                       FontSize="14"
                       Foreground="{StaticResource DataGridHeaderTextBrush}"/>
        </Border>
    </DataTemplate>

</ResourceDictionary>